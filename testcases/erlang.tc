straightforward port to Erlang (p4.erl)
erlang
